<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>Blockchain Transactions</title>
  <style>
    input[type=text],
    input[type=number] {
      margin: 5px;
    }

    button {
      margin: 5px;
    }
  </style>
</head>

<body>
  <h1>Blockchain Transactions</h1>
  <form>
    <label for="sender">Sender:</label>
    <input type="text" id="sender" required><br>
    <label for="receiver">Receiver:</label>
    <input type="text" id="receiver" required><br>
    <label for="amount">Amount:</label>
    <input type="number" id="amount" min="0" step="0.01" required><br>
    <label for="signature">Signature:</label>
    <input type="text" id="signature" required><br>
    <button type="submit" id="submit">Send Transaction</button>
  </form>
  <hr>
  <button id="get_blockchain">Get Blockchain Data</button>
  <p id="blockchain"></p>
  <script>
    const form = document.querySelector('form');
    const blockchainBtn = document.querySelector('#get_blockchain');
    const blockchain = document.querySelector('#blockchain');
    const submitBtn = document.querySelector('#submit');

    form.addEventListener('submit', (event) => {
      event.preventDefault();
      const sender = document.querySelector('#sender').value;
      const receiver = document.querySelector('#receiver').value;
      const amount = document.querySelector('#amount').value;
      const signature = document.querySelector('#signature').value;
      const data = {
        sender: sender,
        receiver: receiver,
        amount: amount,
        signature: signature,
      };
      fetch('/add_transaction', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(data),
      })
        .then((response) => {
          if (!response.ok) {
            throw new Error('Network response was not ok');
          }
          return response.text();
        })
        .then((text) => {
          console.log(text);
        })
        .catch((error) => {
          console.error('Error:', error);
        });
    });

    blockchainBtn.addEventListener('click', () => {
      fetch('/get_blockchain')
        .then((response) => {
          if (!response.ok) {
            throw new Error('Network response was not ok');
          }
          return response.json();
        })
        .then((json) => {
          blockchain.textContent = JSON.stringify(json);
        })
        .catch((error) => {
          console.error('Error:', error);
        });
    });
  </script>
</body>

</html>